<main id="top">
  <div class="container">
     <!-- header -->
    <app-header></app-header>
    <div class="content">
      <!-- phần search -->
      <div class="content-main">
        <div class="search-memb">
          <h1 class="title">
            会員名称で会員を検索します。検索条件無しの場合は全て表示されます。
          </h1>
          <form class="c-form" [formGroup]="form">
            <ul class="d-flex">
              <li class="form-group row">
                <label class="col-form-label">氏名:</label>
                <div class="col-sm">
                  <input
                    type="text"
                    formControlName="employeeName"
                    autofocus
                    maxlength="125"
                  />
                </div>
              </li>
              <li class="form-group row">
                <label class="col-form-label">グループ:</label>
                <div class="col-sm">
                  <select formControlName="departmentName">
                    <option value="">全て</option>
                    <option
                      *ngFor="let d of listdepartments"
                      [value]="d.departmentName"
                    >
                      {{ d.departmentName }}
                    </option>
                  </select>
                </div>
              </li>
              <li class="form-group row">
                <div class="btn-group">
                  <button
                    type="button"
                    class="btn btn-primary btn-sm"
                    (click)="search()"
                  >
                    検索
                  </button>
                  <button
                    type="button"
                    class="btn btn-secondary btn-sm"
                    (click)="handleAdd()"
                  >
                    新規追加
                  </button>
                </div>
              </li>
            </ul>
          </form>
        </div>
        <div class="row row-table">
          <div *ngIf="totalRecords > 0; else emptyList"></div>
          <ng-template #emptyList>
            <div class="empty-list-message">
              <span class="highlight" style="color: rgb(0, 0, 0)"
                >検索条件に該当するユーザが見つかりません。</span
              >
            </div>
          </ng-template>
        </div>
        <div class="css-grid-table box-shadow">
          <div class="css-grid-table-header">
            <div>ID</div>
            <!-- <div>
              氏名
              <span class="sort-icon" (click)="sortColumn('employeeName')">
                <ng-container *ngIf="orderByColumn === 'employeeName'">
                  <ng-container *ngIf="orderByDirection === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="orderByDirection === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="orderByColumn !== 'employeeName'">
                  ▲▽
                </ng-container>
              </span>
            </div> -->

            <div>
              氏名
              <span class="sort-icon" (click)="sortColumn('employeeName')">
                <ng-container *ngIf="orderByColumn === 'employeeName'">
                  <ng-container *ngIf="orderByDirection === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="orderByDirection === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="orderByColumn !== 'employeeName'">
                  <!-- Sử dụng hướng sắp xếp mặc định của cột 'employeeName' -->
                  <ng-container *ngIf="defaultSortDirections['employeeName'] === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="defaultSortDirections['employeeName'] === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
              </span>
            </div>
            <!-- Tương tự cho các cột khác -->
            
            <!-- Tương tự cho các cột khác -->
            

            <div>生年月日</div>
            <div>グループ</div>
            <div>メールアドレス</div>
            <div>電話番号</div>
            <!-- <div>
              日本語能力
              <span class="sort-icon" (click)="sortColumn('certificationName')">
                <ng-container *ngIf="orderByColumn === 'certificationName'">
                  <ng-container *ngIf="orderByDirection === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="orderByDirection === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="orderByColumn !== 'certificationName'">
                  ▲▽
                </ng-container>
              </span>
            </div> -->
            <div>
              氏名
              <span class="sort-icon" (click)="sortColumn('certificationName')">
                <ng-container *ngIf="orderByColumn === 'certificationName'">
                  <ng-container *ngIf="orderByDirection === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="orderByDirection === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="orderByColumn !== 'certificationName'">
                  <!-- Sử dụng hướng sắp xếp mặc định của cột 'employeeName' -->
                  <ng-container *ngIf="defaultSortDirections['certificationName'] === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="defaultSortDirections['certificationName'] === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
              </span>
            </div>
            <!-- Tương tự cho các cột khác -->
            



            <!-- <div>
              失効日
              <span class="sort-icon" (click)="sortColumn('endDate')">
                <ng-container *ngIf="orderByColumn === 'endDate'">
                  <ng-container *ngIf="orderByDirection === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="orderByDirection === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="orderByColumn !== 'endDate'">
                  ▲▽
                </ng-container>
              </span>
            </div> -->

            <div>
              氏名
              <span class="sort-icon" (click)="sortColumn('endDate')">
                <ng-container *ngIf="orderByColumn === 'endDate'">
                  <ng-container *ngIf="orderByDirection === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="orderByDirection === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
                <ng-container *ngIf="orderByColumn !== 'endDate'">
                  <!-- Sử dụng hướng sắp xếp mặc định của cột 'employeeName' -->
                  <ng-container *ngIf="defaultSortDirections['endDate'] === 'asc'">
                    ▲▽
                  </ng-container>
                  <ng-container *ngIf="defaultSortDirections['endDate'] === 'desc'">
                    ▼△
                  </ng-container>
                </ng-container>
              </span>
            </div>
            <!-- Tương tự cho các cột khác -->
            


            <div>点数</div>
          </div>
          <!-- Hiển thị dữ liệu -->
          <div class="css-grid-table-body" *ngFor="let e of listemployees">
            <div class="bor-l-none">
              <a (click)="onViewEmployeeDetail(e.employeeId)" style="cursor: pointer;">{{ e.employeeId }}</a>
            </div>
            <div>{{ e.employeeName }}</div>
            <div>{{ e.employeeBirthDate }}</div>
            <div>{{ e.departmentName }}</div>
            <div>{{ e.employeeEmail }}</div>
            <div>{{ e.employeeTelephone }}</div>
            <div>{{ e.certificationName }}</div>
            <div>{{ e.endDate }}</div>
            <div>{{ e.score }}</div>
          </div>
          <div class="pagin" *ngIf="totalRecords > 0">
            <ng-container *ngIf="totalRecords > 20">
              <button
                class="btn btn-sm btn-pre btn-falcon-default"
                type="button"
                (click)="onPrevPage()"
                [disabled]="pageNumber === 1"
              >
                <svg
                  class="svg-inline--fa fa-chevron-left fa-w-10"
                  aria-hidden="true"
                  focusable="false"
                  data-prefix="fas"
                  data-icon="chevron-left"
                  role="img"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 320 512"
                  data-fa-i2svg=""
                >
                  <path
                    fill="currentColor"
                    d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"
                  ></path>
                </svg>
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                type="button"
                (click)="onPageChange(1)"
                [disabled]="pageNumber === 1"
                [ngClass]="{ 'btn-success': pageNumber === 1 }"
              >
                1
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                type="button"
                *ngIf="pageNumber - 1 > 2"
              >
                ...
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                type="button"
                *ngIf="pageNumber - 1 > 1"
                (click)="onPageChange(pageNumber - 1)"
              >
                {{ pageNumber - 1 }}
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                [ngClass]="{
                  'btn-success': pageNumber === currentPage,
                  'text-primary': pageNumber !== currentPage
                }"
                type="button"
                disabled
                *ngIf="pageNumber != 1 && pageNumber != totalPages"
                (click)="onPageChange(pageNumber)"
              >
                {{ pageNumber }}
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                type="button"
                *ngIf="pageNumber + 1 < totalPages"
                (click)="onPageChange(pageNumber + 1)"
              >
                {{ pageNumber + 1 }}
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                type="button"
                *ngIf="pageNumber + 2 < totalPages"
              >
                ...
              </button>
              <button
                class="btn btn-sm text-primary btn-falcon-default"
                type="button"
                (click)="onPageChange(totalPages)"
                [disabled]="pageNumber === totalPages"
                [ngClass]="{ 'btn-success': pageNumber === totalPages }"
              >
                {{ totalPages }}
              </button>
              <button
                class="btn btn-sm btn-next btn-falcon-default"
                type="button"
                (click)="onNextPage()"
                [disabled]="pageNumber === totalPages"
              >
                <svg
                  class="svg-inline--fa fa-chevron-right fa-w-10"
                  aria-hidden="true"
                  focusable="false"
                  data-prefix="fas"
                  data-icon="chevron-right"
                  role="img"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 320 512"
                  data-fa-i2svg=""
                >
                  <path
                    fill="currentColor"
                    d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"
                  ></path>
                </svg>
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <app-footer></app-footer>
  </div>
</main>
